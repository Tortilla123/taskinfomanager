<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" lang="en" >
    <head>
        <meta charset="UTF-8">
        <title>Applications</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <link th:href="@{/css/addApplication.css}" href="../../webapp/css/addApplication.css" rel="stylesheet" type="text/css" media="all" />
    </head>
<!-- -------------------------------------------APPLICATION FORM-------------------------------------------------------->
    <body>
        <div>

            <h2>Create an Application
                <a href="/" class="btn btn-primary"> Home Page</a>
            </h2>

            <form action = "#" th:action = "@{/addApp}" th:object="${applications}" method = "post" >

                <label >App Name: </label>
                <input type="text" th:field="*{app_Name}" placeholder="Please input app name" />
                <small><span th:if="${#fields.hasErrors('app_Name')}" class="alert alert-danger" th:errors="*{app_Name}"></span></small><br>

                <label>Manager Name: </label>
                <input type="text" class="form" th:field="*{manager_Name}" placeholder="Please input manager name"/>
                <small><span th:if="${#fields.hasErrors('manager_Name')}" class="alert alert-danger" th:errors="*{manager_Name}" ></span></small><br>

                <label>Area: </label>
                <input type="text" th:field="*{area}" placeholder="Please input area"/>
                <small><span th:if="${#fields.hasErrors('area')}" class="alert alert-danger" th:errors="*{area}" ></span></small><br>

                <label>Maintenance ID:  </label>
                <input type="text" th:field="*{maint_Id}" placeholder="Please input maintenance id" />
                <small><span th:if="${#fields.hasErrors('maint_Id')}" class="alert alert-danger" th:errors="*{maint_Id}" ></span></small><br>


                <label>Maintenance Time: </label>
                <input type="datetime-local" th:field="*{maint_TS}" />
                <small><span th:if="${#fields.hasErrors('maint_TS')}" class="alert alert-danger" th:errors="*{maint_TS}" ></span></small><br>

                <br><p><input type="submit" value="Submit" /> <input type="reset" value="Reset" /></p>

            </form><br><br>

<!-- -------------------------------------------APPLICATION LIST-------------------------------------------------------->
            <h3> Application List  <br></h3>

                <table style = "width:60%" >

                    <thead>
                        <tr>
                            <th> App Name</th>
                            <th> Manager Name</th>
                            <th> Area</th>
                            <th> Maintenance ID</th>
                            <th> Maintenance Time</th>
                            <th> Edit Application</th>
                            <th> Delete Application</th>
                        </tr>
                    </thead>

                    <tbody >
                        <tr th:if="${listApps.isEmpty()}">
                            <td colspan="7"> No apps to display. Please add an app. </td>
                        </tr>

                        <tr th:each="applications : ${listApps}" >
                            <td th:text="${applications.app_Name}" ></td>
                            <td th:text="${applications.manager_Name}"  ></td>
                            <td th:text="${applications.area}"         ></td>
                            <td th:text="${applications.maint_Id}"     ></td>
                            <td th:text="${applications.maint_TS}"      ></td>
                            <td align = "center" valign="center">
                                <a th:href = "@{/editApp/{app_Name} (app_Name = ${applications.app_Name})}" class="btn btn-primary">
                                    Edit
                                </a>
                            </td>
                            <td align = "center" valign="center">
                                <a th:href = "@{/deleteApp/{app_Name} (app_Name = ${applications.app_Name})}" onclick="alert('This will delete the entry.')" class="btn btn-primary">
                                    Delete
                                </a>
                            </td>
                        </tr>
                    </tbody>

                </table>

        </div>
    </body>
</html>